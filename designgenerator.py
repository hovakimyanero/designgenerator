import streamlit as st
import random
import requests
from colorthief import ColorThief
from io import BytesIO
from PIL import Image
import matplotlib.font_manager as fm

# === 500 –ë–ò–ó–ù–ï–°-–ò–î–ï–ô ===
business_ideas = [
    "–û–Ω–ª–∞–π–Ω-—à–∫–æ–ª–∞ –¥–ª—è –¥–∏–∑–∞–π–Ω–µ—Ä–æ–≤", "–ò–Ω—Ç–µ—Ä–Ω–µ—Ç-–º–∞–≥–∞–∑–∏–Ω —Ç–µ—Ö–Ω–∏–∫–∏", "–ü—Ä–æ–¥–∞–∂–∞ —Ö–µ–Ω–¥–º–µ–π–¥-–∏–∑–¥–µ–ª–∏–π —á–µ—Ä–µ–∑ Instagram",
    "–ö—É—Ä—Å—ã –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è –¥–ª—è –¥–µ—Ç–µ–π", "–î–æ—Å—Ç–∞–≤–∫–∞ –≥–æ—Ç–æ–≤—ã—Ö —Ä–∞—Ü–∏–æ–Ω–æ–≤ –ø–∏—Ç–∞–Ω–∏—è", "–°–µ—Ä–≤–∏—Å –ø–æ –ø–æ–¥–ø–∏—Å–∫–µ –Ω–∞ –∫–Ω–∏–≥–∏",
    "–ê—Ä–µ–Ω–¥–∞ –¥–µ–∫–æ—Ä–∞—Ü–∏–π –¥–ª—è —Ñ–æ—Ç–æ—Å–µ—Å—Å–∏–π", "VR-—Ç—É—Ä –ø–æ –≥–æ—Ä–æ–¥–∞–º –º–∏—Ä–∞", "–†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö –∏–≥—Ä",
    "–°–æ–∑–¥–∞–Ω–∏–µ —É–º–Ω—ã—Ö –∑–µ—Ä–∫–∞–ª —Å –¥–æ–ø–æ–ª–Ω–µ–Ω–Ω–æ–π —Ä–µ–∞–ª—å–Ω–æ—Å—Ç—å—é", "–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è —Å–≤–∏–¥–∞–Ω–∏–π",
    "–ë—é—Ä–æ –ø–µ—Ä–µ–≤–æ–¥–æ–≤ —Å –Ω–µ–π—Ä–æ—Å–µ—Ç—è–º–∏", "–û–Ω–ª–∞–π–Ω-–∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–∏ –ø–æ –ª–∏—á–Ω—ã–º —Ñ–∏–Ω–∞–Ω—Å–∞–º", "–ú–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å –¥–ª—è –∫—Ä–µ–∞—Ç–∏–≤–Ω—ã—Ö —É—Å–ª—É–≥",
    "–ü—Ä–æ–¥–∞–∂–∞ –≥–æ—Ç–æ–≤—ã—Ö —Ä–µ—à–µ–Ω–∏–π –¥–ª—è –∏–Ω—Ç–µ—Ä–Ω–µ—Ç-–º–∞–≥–∞–∑–∏–Ω–æ–≤", "–û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è –∞–≤—Ç–æ—Ä—Å–∫–∏—Ö —Ç—É—Ä–æ–≤", "–®–∫–æ–ª–∞ –±–ª–æ–≥–µ—Ä–æ–≤",
    "3D-–ø–µ—á–∞—Ç—å –Ω–∞ –∑–∞–∫–∞–∑", "–†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ —á–∞—Ç-–±–æ—Ç–æ–≤ –¥–ª—è –±–∏–∑–Ω–µ—Å–∞", "–≠–∫–æ-—É–ø–∞–∫–æ–≤–∫–∞ –¥–ª—è –º–∞–ª–æ–≥–æ –±–∏–∑–Ω–µ—Å–∞",
    "–°–µ—Ä–≤–∏—Å –∞—Ä–µ–Ω–¥—ã –≤–µ–ª–æ—Å–∏–ø–µ–¥–æ–≤", "–ü—Ä–æ–¥–∞–∂–∞ —Ü–∏—Ñ—Ä–æ–≤—ã—Ö —Ç–æ–≤–∞—Ä–æ–≤", "–ü–ª–∞—Ç—Ñ–æ—Ä–º–∞ –¥–ª—è –æ–Ω–ª–∞–π–Ω-–∫—É—Ä—Å–æ–≤",
    "–ú–æ–±–∏–ª—å–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è —Ç—Ä–µ–Ω–µ—Ä–æ–≤", "–°—Ç–∞—Ä—Ç–∞–ø –ø–æ —É–º–Ω–æ–º—É –æ—Å–≤–µ—â–µ–Ω–∏—é", "–°–æ–∑–¥–∞–Ω–∏–µ NFT-–∫–æ–Ω—Ç–µ–Ω—Ç–∞",
    "–†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ AR-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π", "–ò–Ω—Ç–µ—Ä–Ω–µ—Ç-–º–∞–≥–∞–∑–∏–Ω —ç–∫–æ–ª–æ–≥–∏—á–Ω—ã—Ö —Ç–æ–≤–∞—Ä–æ–≤", "–ö–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–∏ –ø–æ –ª–∏—á–Ω–æ–º—É –±—Ä–µ–Ω–¥—É",
    "–§—Ä–∏–ª–∞–Ω—Å-–ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ –¥–ª—è —Ö—É–¥–æ–∂–Ω–∏–∫–æ–≤", "–ö–æ—Ñ–µ–π–Ω—è —Å –ø–æ–¥–ø–∏—Å–∫–æ–π", "–û–Ω–ª–∞–π–Ω-—à–∫–æ–ª–∞ –ø–æ –∫–∏–±–µ—Ä—Å–ø–æ—Ä—Ç—É",
    "–ü–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ –¥–∏–∑–∞–π–Ω–µ—Ä—Å–∫—É—é –æ–¥–µ–∂–¥—É", "AI-–∞—Å—Å–∏—Å—Ç–µ–Ω—Ç –¥–ª—è –±–∏–∑–Ω–µ—Å–∞", "–†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ VR-–∏–≥—Ä",
    "–ê–≥–µ–Ω—Ç—Å—Ç–≤–æ –ø–æ —Å–æ–∑–¥–∞–Ω–∏—é –º–µ–º–æ–≤", "–°–µ—Ä–≤–∏—Å –¥–ª—è —Å–æ–≤–º–µ—Å—Ç–Ω—ã—Ö –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏–π", "–ë–æ—Ç –¥–ª—è —Ñ–∏–Ω–∞–Ω—Å–æ–≤–æ–≥–æ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è",
    "–ü—Ä–æ–¥–∞–∂–∞ –∫–∞—Å—Ç–æ–º–Ω—ã—Ö —Å–º–∞—Ä—Ç—Ñ–æ–Ω–æ–≤", "–ú–∞—Å—Ç–µ—Ä-–∫–ª–∞—Å—Å—ã –ø–æ —Ä–∏—Å–æ–≤–∞–Ω–∏—é", "–°—Ç—É–¥–∏—è —Å–æ–∑–¥–∞–Ω–∏—è —Ñ–∏–ª—å–º–æ–≤ –¥–ª—è YouTube",
    *["–ò–¥–µ—è #" + str(i) for i in range(41, 501)]  # –î–æ–ø–æ–ª–Ω–µ–Ω–∏–µ –¥–æ 500 –∏–¥–µ–π
]

# === 500 –ù–ê–ó–í–ê–ù–ò–ô ===
project_names = [
    "Creative Spark", "Visionary Design", "Innovate Hub", "Aesthetic Lab", "Digital Blueprint",
    "Pixel Perfection", "Design Wave", "Infinite Ideas", "Bold Concepts", "Minimalist Mindset",
    "Future Vision", "Bright Creations", "NextGen Studio", "Inspire Works", "DesignCraft",
    "Visual Genius", "Concept Factory", "Modern Art Lab", "Abstract Mind", "Creative Shift",
    *["–ù–∞–∑–≤–∞–Ω–∏–µ #" + str(i) for i in range(21, 501)]  # –î–æ–ø–æ–ª–Ω–µ–Ω–∏–µ –¥–æ 500 –Ω–∞–∑–≤–∞–Ω–∏–π
]

# === –§–£–ù–ö–¶–ò–Ø –î–õ–Ø –í–´–ë–û–†–ê –®–†–ò–§–¢–û–í ===
def get_random_fonts():
    available_fonts = [f.name for f in fm.fontManager.ttflist]
    return random.sample(available_fonts, 2)

# === –§–£–ù–ö–¶–ò–Ø –î–õ–Ø –í–´–ë–û–†–ê –¶–í–ï–¢–û–í–û–ô –ü–ê–õ–ò–¢–†–´ ===
def get_color_palette(image_url):
    try:
        response = requests.get(image_url)
        img = Image.open(BytesIO(response.content))
        color_thief = ColorThief(BytesIO(response.content))
        palette = color_thief.get_palette(color_count=5)
        return palette
    except:
        return [(255, 0, 0), (0, 255, 0), (0, 0, 255), (255, 255, 0), (0, 255, 255)]

# === –§–£–ù–ö–¶–ò–Ø –ì–ï–ù–ï–†–ê–¶–ò–ò –î–ê–ù–ù–´–• ===
def generate_new_design():
    st.session_state.project_name = random.choice(project_names)
    st.session_state.business_idea = random.choice(business_ideas)
    st.session_state.fonts = get_random_fonts()
    image_url = "https://source.unsplash.com/random/800x600/?design"
    st.session_state.colors = get_color_palette(image_url)

# === –ò–ù–¢–ï–†–§–ï–ô–° STREAMLIT ===
st.title("üé® –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä –∏–¥–µ–π –¥–ª—è –¥–∏–∑–∞–π–Ω–∞")

if "project_name" not in st.session_state:
    generate_new_design()

st.button("üîÑ –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –Ω–æ–≤—É—é –∏–¥–µ—é", on_click=generate_new_design)

st.subheader("üìù –ù–∞–∑–≤–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞:")
st.write(st.session_state.project_name)

st.subheader("üí° –ë–∏–∑–Ω–µ—Å-–∏–¥–µ—è:")
st.write(st.session_state.business_idea)

st.subheader("üñã –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ —à—Ä–∏—Ñ—Ç—ã:")
st.write(", ".join(st.session_state.fonts))

st.subheader("üé® –¶–≤–µ—Ç–æ–≤–∞—è –ø–∞–ª–∏—Ç—Ä–∞:")
st.write(st.session_state.colors)